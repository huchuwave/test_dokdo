<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ: ì¸í„°ë™í‹°ë¸Œ íƒ€ì„ë¼ì¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #fdfbf7; /* Warm neutral background */
            color: #2c2c2c;
        }
        /* Changed to Sans-serif for all headers and specific classes */
        h1, h2, h3, .serif {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 300px;
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .timeline-line {
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }
        .timeline-item:last-child .timeline-line {
            display: none;
        }
        /* Custom scrollbar for timeline list */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #d1d5db; 
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #9ca3af; 
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Earth Tones (Cream #fdfbf7, Slate #2c2c2c, Muted Blue #4a6fa5, Clay Red #c06c5d, Sage Green #768a76) -->
    <!-- Application Structure Plan: Dashboard layout. Top section for aggregate insights (Chart.js) to show record distribution by actor/era. Bottom section for a detailed, filterable timeline feed. Focus on "Evidence Exploration" allowing users to cross-reference historical claims. -->
    <!-- Visualization & Content Choices: 
         1. Interactive Bar Chart: Shows count of historical records by Actor (Korea/Japan/International). Goal: Compare volume of evidence. Interaction: Click bar to filter timeline.
         2. Dynamic Timeline Feed: Main content area. Cards for each event. Goal: Detailed reading.
         3. Filter Controls: Dropdowns for quick segmentation.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row justify-between items-center">
            <div class="flex items-center space-x-3 mb-2 sm:mb-0">
                <div class="w-8 h-8 bg-blue-800 rounded-full flex items-center justify-center text-white font-bold serif">ë…</div>
                <h1 class="text-xl sm:text-2xl font-bold text-gray-800">ë…ë„ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ</h1>
            </div>
            <nav class="flex items-center space-x-3 text-sm font-medium text-gray-500">
                <a href="index.html" class="flex items-center gap-2 px-3 py-1.5 rounded-full text-gray-600 bg-gray-50 hover:bg-blue-50 hover:text-blue-700 border border-gray-200 hover:border-blue-200 transition-all duration-200">
                    <i class="fas fa-home"></i>
                    <span>í™ˆìœ¼ë¡œ</span>
                </a>
                <span class="h-4 w-px bg-gray-300 mx-1"></span>
                <span id="total-records" class="text-blue-700 bg-blue-50 px-3 py-1.5 rounded-full border border-blue-100">ê¸°ë¡ ë¡œë”©ì¤‘...</span>
            </nav>
        </div>
    </header>

    <!-- Main Content Grid -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <!-- Left Column: Controls & Analytics (Sticky on Desktop) -->
        <aside class="lg:col-span-1 space-y-6">
            
            <!-- Introduction -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-lg font-bold mb-3 text-gray-800 border-b border-gray-100 pb-2">ì•„ì¹´ì´ë¸Œ ì†Œê°œ</h2>
                <p class="text-gray-600 text-sm leading-relaxed mb-4">
                    ì´ ì¸í„°ë™í‹°ë¸Œ ì—°í‘œëŠ” ì„ ì‚¬ì‹œëŒ€ë¶€í„° í˜„ëŒ€ì— ì´ë¥´ëŠ” ë…ë„ ê´€ë ¨ ì—­ì‚¬ì  ê¸°ë¡ê³¼ ì‚¬ê±´ì„ ë§ë¼í•©ë‹ˆë‹¤. 
                    <br><br>
                    í•œêµ­, ì¼ë³¸, ê·¸ë¦¬ê³  êµ­ì œ ì‚¬íšŒì˜ ê¸°ë¡ì„ ë¹„êµ ë¶„ì„í•˜ì—¬ ë…ë„ ì˜ìœ ê¶Œì˜ ì—­ì‚¬ì  ì§„ì‹¤ì„ íƒêµ¬í•´ ë³´ì„¸ìš”.
                </p>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <div class="text-2xl font-bold text-blue-800 serif" id="stat-start-year">Wait</div>
                        <div class="text-xs text-gray-500">ìµœì´ˆ ê¸°ë¡ (ì—°ë„)</div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <div class="text-2xl font-bold text-blue-800 serif" id="stat-count">0</div>
                        <div class="text-xs text-gray-500">ìˆ˜ë¡ëœ ì‚¬ê±´</div>
                    </div>
                </div>
            </div>

            <!-- Analysis Chart -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-lg font-bold mb-3 text-gray-800">ê¸°ë¡ ë¶„í¬ ë¶„ì„</h2>
                <p class="text-xs text-gray-500 mb-4">êµ­ê°€ ë° ì£¼ì²´ë³„ ì—­ì‚¬ì  ê¸°ë¡ì˜ ë¹ˆë„ë¥¼ ì‹œê°í™”í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜í”„ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ê¸°ë¡ë§Œ í•„í„°ë§ë©ë‹ˆë‹¤.</p>
                
                <div class="chart-container">
                    <canvas id="historyChart"></canvas>
                </div>
            </div>

            <!-- Filters -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 sticky top-24">
                <h2 class="text-lg font-bold mb-4 text-gray-800 flex items-center justify-between">
                    <span>í•„í„°ë§ ë° ê²€ìƒ‰</span>
                    <button id="reset-btn" class="text-xs text-blue-600 hover:underline font-normal hidden">ì´ˆê¸°í™”</button>
                </h2>
                
                <div class="space-y-4">
                    <!-- Search -->
                    <div>
                        <label class="block text-xs font-semibold text-gray-500 mb-1">í‚¤ì›Œë“œ ê²€ìƒ‰</label>
                        <input type="text" id="search-input" placeholder="ì˜ˆ: ì•ˆìš©ë³µ, ì¹™ë ¹, ì§€ë„..." 
                            class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                    </div>

                    <!-- Actor Filter -->
                    <div>
                        <label class="block text-xs font-semibold text-gray-500 mb-1">ê´€ë ¨ êµ­ê°€/ì£¼ì²´</label>
                        <div class="flex flex-wrap gap-2" id="actor-filters">
                            <!-- JS populated buttons -->
                        </div>
                    </div>

                    <!-- Era Filter -->
                    <div>
                        <label class="block text-xs font-semibold text-gray-500 mb-1">ì‹œëŒ€ êµ¬ë¶„</label>
                        <select id="era-select" class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="all">ì „ì²´ ì‹œëŒ€</option>
                            <!-- JS populated options -->
                        </select>
                    </div>
                </div>
            </div>

        </aside>

        <!-- Right Column: Timeline Feed -->
        <section class="lg:col-span-2">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-800 serif">ì—­ì‚¬ ì—°í‘œ</h2>
                <span id="result-count" class="text-sm text-gray-500 bg-white px-3 py-1 rounded-full border border-gray-200 shadow-sm">
                    ì „ì²´ ë³´ê¸°
                </span>
            </div>

            <!-- Timeline Container -->
            <div id="timeline-feed" class="space-y-0 relative pl-2">
                <!-- JS populated items -->
            </div>
            
            <div id="no-results" class="hidden text-center py-12 text-gray-500">
                <p class="mb-2 text-4xl">ğŸ§</p>
                <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                <button onclick="resetFilters()" class="mt-4 text-blue-600 font-medium hover:underline">í•„í„° ì´ˆê¸°í™”</button>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-gray-300 py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-bold mb-2">ë…ë„ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ</p>
            <p class="text-xs text-gray-500">ì œê³µëœ ì›ë³¸ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì œì‘ëœ ì¸í„°ë™í‹°ë¸Œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.</p>
        </div>
    </footer>

    <script>
        // --- Data Source ---
        // Based on the provided Dokdo history markdown table
        const rawData = [
            { year: "ì„ ì‚¬/ê³ ëŒ€", yearVal: -4600000, category: "ì§€ë¦¬/í˜•ì„±", actor: "ìì—°", content: "ì•½ 460~250ë§Œ ë…„ ì „: í™”ì‚° í™œë™ìœ¼ë¡œ ë…ë„ ìƒì„± (ìš¸ë¦‰ë„ë³´ë‹¤ ë¨¼ì € ìƒì„±ë¨)", source: "[1]" },
            { year: "512ë…„", yearVal: 512, category: "ì—­ì‚¬(ì‚¼êµ­)", actor: "í•œêµ­", content: "ìš°ì‚°êµ­ ë³µì†: ì‹ ë¼ ì§€ì¦ì™• ë•Œ ì´ì‚¬ë¶€ê°€ ìš°ì‚°êµ­ì„ ì •ë²Œí•¨ (ìë£Œ ë‚´ ì§ì ‘ ì—°ë„ ì–¸ê¸‰ì€ ì—†ìœ¼ë‚˜ 'ìš°ì‚°ë„' ëª…ì¹­ ìœ ë˜ë¡œ ì‚¼êµ­ì‹œëŒ€ ì–¸ê¸‰)", source: "[2]" },
            { year: "1454ë…„", yearVal: 1454, category: "ì¡°ì„ (ê¸°ë¡)", actor: "í•œêµ­", content: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€: ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„) ë‘ ì„¬ì´ ìš¸ì§„í˜„ ì •ë™ìª½ì— ìˆìœ¼ë©°, ë‚ ì”¨ê°€ ë§‘ìœ¼ë©´ ì„œë¡œ ë³¼ ìˆ˜ ìˆë‹¤ê³  ê¸°ë¡", source: "[3]" },
            { year: "1481ë…„", yearVal: 1481, category: "ì¡°ì„ (ì§€ë„)", actor: "í•œêµ­", content: "íŒ”ë„ì´ë„: ë™í•´ìƒì— ìš¸ë¦‰ë„ì™€ ìš°ì‚°ë„(ë…ë„) ë‘ ê°œì˜ ì„¬ì„ ê·¸ë¦¼", source: "[4]" },
            { year: "1531ë…„", yearVal: 1531, category: "ì¡°ì„ (ê¸°ë¡)", actor: "í•œêµ­", content: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ: ìš°ì‚°ë„ì™€ ìš¸ë¦‰ë„ê°€ ê°•ì›ë„ ìš¸ì§„í˜„ ì†Œì†ì„ì„ ëª…ì‹œí•˜ë©°, 'íŒ”ë„ì´ë„'ê°€ ì²¨ë¶€ë¨", source: "[3], [4]" },
            { year: "1667ë…„", yearVal: 1667, category: "ì¼ë³¸(ê¸°ë¡)", actor: "ì¼ë³¸", content: "ì€ì£¼ì‹œì²­í•©ê¸°: ì¼ë³¸ì˜ ì˜¤í‚¤ì„¬ì„ ì¼ë³¸ì˜ ì„œë¶ìª½ ê²½ê³„ë¡œ ì‚¼ì•„, ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°„ì ‘ ì‹œì‚¬í•¨", source: "[5]" },
            { year: "1693ë…„", yearVal: 1693, category: "ì¡°ì„ /ì¼ë³¸", actor: "í•œì¼ê´€ê³„", content: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´: ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ë‚©ì¹˜ë˜ì–´ ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ì£¼ì¥í•˜ê³  ëŒì•„ì˜´", source: "[6]" },
            { year: "1695ë…„", yearVal: 1695, category: "ì¼ë³¸(ê¸°ë¡)", actor: "ì¼ë³¸", content: "ë—í† ë¦¬ë²ˆ ë‹µë³€ì„œ: ì—ë„ ë§‰ë¶€ì˜ ì§ˆë¬¸ì— ëŒ€í•´ ë—í† ë¦¬ë²ˆì´ ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ë—í† ë¦¬ë²ˆ ì†Œì†ì´ ì•„ë‹˜ì„ ë‹µë³€í•¨", source: "[7], [8]" },
            { year: "1696ë…„", yearVal: 1696, category: "ì¡°ì„ /ì¼ë³¸", actor: "í•œì¼ê´€ê³„", content: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´: ì•ˆìš©ë³µì´ ì¼ë³¸ í˜¸í‚¤ì£¼ì— ê°€ì„œ ë…ë„ ì˜ìœ ê¶Œì„ ì£¼ì¥. ì¼ë³¸ ë§‰ë¶€ê°€ 'ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë¦¼", source: "[7]" },
            { year: "1697ë…„", yearVal: 1697, category: "ì¡°ì„ (ì •ì±…)", actor: "í•œêµ­", content: "ìˆ˜í† ê´€ ì œë„ ì‹œí–‰: ì•ˆìš©ë³µ ì‚¬ê±´ ì´í›„ ì¡°ì„  ì •ë¶€ê°€ ìš¸ë¦‰ë„ì™€ ì£¼ë³€ ì„¬ì„ 3ë…„ì— í•œ ë²ˆì”© ê´€ë¦¬í•˜ëŠ” ìˆ˜í† ê´€ì„ íŒŒê²¬í•˜ê¸° ì‹œì‘", source: "[8]" },
            { year: "1779ë…„", yearVal: 1779, category: "ì¼ë³¸(ì§€ë„)", actor: "ì¼ë³¸", content: "ê°œì •ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„: ë‚˜ê°€ì¿ ë³´ ì„¸í‚¤ìŠ¤ì´ê°€ ì œì‘. ìš¸ë¦‰ë„ì™€ ë…ë„ë¥¼ ì¼ë³¸ ì˜í† ì™€ ë‹¤ë¥¸ ìƒ‰(ì±„ìƒ‰ ì—†ìŒ)ìœ¼ë¡œ í‘œì‹œí•˜ì—¬ ì¼ë³¸ ì˜ì—­ ë°–ìœ¼ë¡œ ë‘ ", source: "[9]" },
            { year: "1785ë…„", yearVal: 1785, category: "ì¼ë³¸(ì§€ë„)", actor: "ì¼ë³¸", content: "ì‚¼êµ­ì ‘ì–‘ì§€ë„: í•˜ì•¼ì‹œ ì‹œí—¤ì´ê°€ ì œì‘. ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ ì¡°ì„ ê³¼ ê°™ì€ í™©ìƒ‰ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ê³  í‘œê¸°", source: "[9]" },
            { year: "1787ë…„", yearVal: 1787, category: "ì„œì–‘(ê¸°ë¡)", actor: "ì„œì–‘/êµ­ì œ", content: "í”„ë‘ìŠ¤ê°€ ìš¸ë¦‰ë„ë¥¼ ë°œê²¬í•˜ê³  'ë‹¤ì¦ë ˆ'ë¡œ ëª…ëª…", source: "[10]" },
            { year: "1789ë…„", yearVal: 1789, category: "ì„œì–‘(ê¸°ë¡)", actor: "ì„œì–‘/êµ­ì œ", content: "ì˜êµ­ì´ ìš¸ë¦‰ë„ë¥¼ 'ì•„ë¥´ê³ ë…¸íŠ¸'ë¡œ ëª…ëª… (ì´í›„ ì„œì–‘ ì§€ë„ì—ì„œ ìš¸ë¦‰ë„/ë…ë„ í˜¼ë™ì˜ ì›ì¸)", source: "[10]" },
            { year: "1808ë…„", yearVal: 1808, category: "ì¡°ì„ (ê¸°ë¡)", actor: "í•œêµ­", content: "ë§Œê¸°ìš”ëŒ: ìš¸ë¦‰ê³¼ ìš°ì‚°ì€ ëª¨ë‘ ìš°ì‚°êµ­ì˜ ë•…ì´ë©°, ìš°ì‚°ì€ ì¼ë³¸ì¸ì´ ë§í•˜ëŠ” ì†¡ë„(ë…ë„)ë¼ê³  ê¸°ë¡", source: "[11]" },
            { year: "1832ë…„", yearVal: 1832, category: "ì„œì–‘(ì§€ë„)", actor: "ì„œì–‘/êµ­ì œ", content: "ì‚¼êµ­í†µëŒë„: ë…ì¼ì¸ í´ë¼í”„ë¡œíŠ¸ ì œì‘. ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ í•œêµ­ê³¼ ê°™ì€ ë…¸ë€ìƒ‰ìœ¼ë¡œ í‘œì‹œ", source: "[12]" },
            { year: "1835ë…„", yearVal: 1835, category: "ì¼ë³¸(ì§€ë„)", actor: "ì¼ë³¸", content: "ì•„ì„¸ì•„ì†Œë™ì–‘ë„: ë‚˜ê°€ì¿ ë³´ ì„¸í‚¤ìŠ¤ì´ ì œì‘. ì´ì „ ì§€ë„ì™€ ë‹¬ë¦¬ ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ ì¼ë³¸ ì˜í† ì¸ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œê¸°í•˜ëŠ” ì˜¤ë¥˜ë¥¼ ë²”í•¨", source: "[13]" },
            { year: "1849ë…„", yearVal: 1849, category: "ì„œì–‘(ê¸°ë¡)", actor: "ì„œì–‘/êµ­ì œ", content: "í”„ë‘ìŠ¤ í¬ê²½ì„  ë¦¬ì•™ì¿ ë¥´í˜¸ê°€ ë…ë„ë¥¼ ë°œê²¬í•˜ê³  'ë¦¬ì•™ì¿ ë¥´ ì•”'ìœ¼ë¡œ ëª…ëª…", source: "[10]" },
            { year: "1854ë…„", yearVal: 1854, category: "ì„œì–‘(ê¸°ë¡)", actor: "ì„œì–‘/êµ­ì œ", content: "ëŸ¬ì‹œì•„ êµ°í•¨ì´ ë…ë„ë¥¼ ë°œê²¬í•˜ê³  ë™ë„ë¥¼ 'ë©”ë„¬ë¼ì´', ì„œë„ë¥¼ 'ì˜¬ë¦¬ë¶€ì°¨'ë¡œ ëª…ëª…", source: "[10]" },
            { year: "1857ë…„", yearVal: 1857, category: "ëŸ¬ì‹œì•„(ì§€ë„)", actor: "ì„œì–‘/êµ­ì œ", content: "í•œë°˜ë„ ë™í•´ì•ˆ ì§€ë„: ëŸ¬ì‹œì•„ í•´êµ° ìˆ˜ë¡œêµ­ì´ ë…ë„ë¥¼ í•œêµ­ì˜ ì˜í† ë¡œ ì¸ì •í•˜ì—¬ ì§€ë„ ì œì‘", source: "[12]" },
            { year: "1870ë…„", yearVal: 1870, category: "ì¼ë³¸(ê¸°ë¡)", actor: "ì¼ë³¸", content: "ì¡°ì„ êµ­ êµì œì‹œë§ ë‚´íƒì„œ: ì¼ë³¸ ì™¸ë¬´ì„± ê´€ë£Œê°€ ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„ ì— ì†í•˜ê²Œ ëœ ì‚¬ì •ì„ ë³´ê³ í•¨", source: "[14]" },
            { year: "1877ë…„", yearVal: 1877, category: "ì¼ë³¸(ë¬¸ì„œ)", actor: "ì¼ë³¸", content: "íƒœì •ê´€ ì§€ë ¹: ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì¸ íƒœì •ê´€ì´ 'ìš¸ë¦‰ë„ì™€ ë…ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ë‹¤'ëŠ” ê²ƒì„ ê³µì‹ì ìœ¼ë¡œ ì§€ì‹œí•¨", source: "[14], [15]" },
            { year: "1900ë…„", yearVal: 1900, category: "ëŒ€í•œì œêµ­", actor: "í•œêµ­", content: "ì¹™ë ¹ ì œ41í˜¸ (10ì›” 25ì¼): ìš¸ë¦‰ë„ë¥¼ ìš¸ë„ë¡œ ê°œì¹­í•˜ê³  ê´€í•  êµ¬ì—­ì— 'ì„ë„(ë…ë„)'ë¥¼ ëª…ì‹œí•˜ì—¬ ì˜í†  ì£¼ê¶Œ ì„ í¬", source: "[11]" },
            { year: "1904ë…„", yearVal: 1904, category: "ì¼ë³¸", actor: "ì¼ë³¸", content: "ë‚˜ì¹´ì´ ìš”ìë¶€ë¡œê°€ ì¼ë³¸ ì •ë¶€ì— ë…ë„ í¸ì… ì²­ì›ì„œ ì œì¶œ", source: "[15]" },
            { year: "1905ë…„", yearVal: 1905, category: "ì¼ë³¸", actor: "ì¼ë³¸", content: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ ì œ40í˜¸ (2ì›” 22ì¼): ì¼ë³¸ì´ ë…ë„ë¥¼ 'ë‹¤ì¼€ì‹œë§ˆ'ë¡œ ê°œì¹­í•˜ê³  ì‹œë§ˆë„¤í˜„ì— ë¶ˆë²• í¸ì… (ëŸ¬ì¼ì „ìŸ ì¤‘)", source: "[10], [15]" },
            { year: "1906ë…„", yearVal: 1906, category: "ëŒ€í•œì œêµ­", actor: "í•œêµ­", content: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì´ ì¼ë³¸ì˜ ë…ë„ í¸ì… ì†Œì‹ì„ ë“£ê³  ê°•ì›ë„ ê´€ì°°ì‚¬ì— ë³´ê³ , ì˜ì •ë¶€ì—ì„œ 'ì§€ë ¹ 3í˜¸'ë¡œ ì¼ë³¸ì˜ ì£¼ì¥ì„ ë°˜ë°•", source: "[5]" },
            { year: "1946ë…„", yearVal: 1946, category: "êµ­ì œ(ì—°í•©êµ­)", actor: "ì„œì–‘/êµ­ì œ", content: "SCAPIN ì œ677í˜¸ (1ì›” 29ì¼): ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹ìœ¼ë¡œ ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ êµ¬ì—­ì—ì„œ ì œì™¸í•˜ê³  í•œêµ­ ì˜í† ë¡œ ì¸ì •", source: "[16]" },
            { year: "1950ë…„", yearVal: 1950, category: "êµ­ì œ(ì—°í•©êµ­)", actor: "ì„œì–‘/êµ­ì œ", content: "ì—°í•©êµ­ êµ¬ì¼ë³¸ì˜í† ì²˜ë¦¬ì— ê´€í•œ í•©ì˜ì„œ: ë…ë„ë¥¼ í•œêµ­ ì˜í† ë¡œ í‘œì‹œí•œ ë¶€ì†ì§€ë„ í¬í•¨", source: "[17]" },
            { year: "1951ë…„", yearVal: 1951, category: "êµ­ì œ/í•œêµ­", actor: "í•œì¼ê´€ê³„", content: "í‰í™”ì„ (ì´ìŠ¹ë§Œ ë¼ì¸) ì„ í¬ (1ì›”): ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ ì£¼ê¶Œ ì„ ì–¸. ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½ ì²´ê²° (9ì›”): ì¼ë³¸ ë¡œë¹„ë¡œ ë…ë„ ëª…ì¹­ì´ ìµœì¢… ì¡°ì•½ë¬¸ì—ì„œ ë¹ ì¡Œìœ¼ë‚˜, ì´ˆê¸° ì´ˆì•ˆ(1947)ì—ëŠ” í•œêµ­ ì˜í† ë¡œ ëª…ì‹œë¨", source: "[17], [18]" },
            { year: "1952ë…„", yearVal: 1952, category: "í•œêµ­", actor: "í•œêµ­", content: "ì´ìŠ¹ë§Œ í‰í™”ì„  ë³¸ê²© ì‹œí–‰, ë…ë„ ì£¼ë³€ ì¼ë³¸ ì–´ì„  ë‹¨ì†", source: "[18]" },
            { year: "1953ë…„", yearVal: 1953, category: "í•œêµ­", actor: "í•œêµ­", content: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™ ì‹œì‘: í™ìˆœì¹  ëŒ€ì¥ ë“± ë¯¼ê°„ì¸ë“¤ì´ ë…ë„ì— ìƒì£¼í•˜ë©° ì¼ë³¸ì˜ ì¹¨íƒˆì„ ë§‰ì•„ëƒ„. ë…ë„ê²½ë¹„ëŒ€ ìƒì£¼ ì‹œì‘: ìš¸ë¦‰ê²½ì°°ì„œ ì†Œì†ìœ¼ë¡œ ìƒì‹œ ì£¼ë‘” ì‹œì‘", source: "[6], [7]" },
            { year: "1954ë…„", yearVal: 1954, category: "ì¼ë³¸", actor: "ì¼ë³¸", content: "ì¼ë³¸ì´ ë…ë„ ë¬¸ì œë¥¼ êµ­ì œì‚¬ë²•ì¬íŒì†Œ(ICJ)ì— íšŒë¶€í•  ê²ƒì„ ì œì•ˆí–ˆìœ¼ë‚˜ í•œêµ­ ê±°ë¶€", source: "[19]" },
            { year: "1965ë…„", yearVal: 1965, category: "í•œêµ­/ì¼ë³¸", actor: "í•œì¼ê´€ê³„", content: "í•œì¼ê¸°ë³¸ì¡°ì•½ ì²´ê²°: ë…ë„ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ì•Šì€ ìƒíƒœ(ì‚¬ì‹¤ìƒ í•œêµ­ì˜ ì ê±° ìœ ì§€)ë¡œ êµ­êµ ì •ìƒí™” (ì´ë¥¸ë°” ë…ë„ ë°€ì•½ì„¤)", source: "[19]" },
            { year: "1968ë…„", yearVal: 1968, category: "í•œêµ­", actor: "í•œêµ­", content: "ìµœì¢…ë•, ìµœì´ˆì˜ ë…ë„ ì£¼ë¯¼ ë“±ë¡: ì„œë„ì— ê±°ì£¼ ì‹œì„¤ì„ ì§“ê³  ìƒí™œ ì‹œì‘", source: "[8]" },
            { year: "1998ë…„", yearVal: 1998, category: "í•œêµ­/ì¼ë³¸", actor: "í•œì¼ê´€ê³„", content: "ì‹ í•œì¼ ì–´ì—…í˜‘ì • ì²´ê²°: ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ì–´ ì˜ìœ ê¶Œ ë…¼ë€ ë° ì–´ë¯¼ í”¼í•´ ë°œìƒ (ë…ë„ ì§€ëª… ë¯¸í‘œê¸°, ì¢Œí‘œë§Œ í‘œê¸°)", source: "[20], [21]" },
            { year: "1999ë…„", yearVal: 1999, category: "í•œêµ­", actor: "í•œêµ­", content: "ì‹œë¯¼ë‹¨ì²´ 'ë…ë„ìˆ˜í˜¸ëŒ€' ê²°ì„±, 'ë…ë„ì˜ ë‚ ' ì œì • ìš´ë™ ì‹œì‘", source: "[17]" },
            { year: "2005ë…„", yearVal: 2005, category: "ì¼ë³¸", actor: "ì¼ë³¸", content: "'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ì œì • (3ì›”): ì‹œë§ˆë„¤í˜„ ì˜íšŒê°€ ë§¤ë…„ 2ì›” 22ì¼ì„ ê¸°ë…ì¼ë¡œ ì§€ì •í•˜ëŠ” ì¡°ë¡€ í†µê³¼", source: "[22]" },
            { year: "2006ë…„", yearVal: 2006, category: "í•œêµ­", actor: "í•œêµ­", content: "ë…¸ë¬´í˜„ ëŒ€í†µë ¹, í•œì¼ê´€ê³„ ê´€ë ¨ ëŒ€êµ­ë¯¼ íŠ¹ë³„ë‹´í™” ë°œí‘œ (ë…ë„ ìˆ˜í˜¸ ì˜ì§€ ì²œëª…)", source: "[23]" },
            { year: "2008ë…„", yearVal: 2008, category: "í•œêµ­/ì¼ë³¸", actor: "í•œì¼ê´€ê³„", content: "í•œêµ­: ë™ë¶ì•„ì—­ì‚¬ì¬ë‹¨ ë…ë„ì—°êµ¬ì†Œ ì„¤ë¦½. ì¼ë³¸: ë¬¸ë¶€ê³¼í•™ì„± í•™ìŠµì§€ë„ìš”ë ¹ í•´ì„¤ì„œì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ ê¸°ìˆ  ì‹œì‘", source: "[16], [24]" },
            { year: "2011ë…„", yearVal: 2011, category: "ì¼ë³¸", actor: "ì¼ë³¸", content: "ì¼ë³¸ ì¤‘í•™êµ êµê³¼ì„œ ê²€ì •: ì§€ë¦¬, ê³µë¯¼ë¿ë§Œ ì•„ë‹ˆë¼ ì—­ì‚¬ êµê³¼ì„œì—ë„ 'ì¼ë³¸ ê³ ìœ  ì˜í† ' ê¸°ìˆ  í™•ëŒ€", source: "[24], [25]" },
            { year: "2015ë…„", yearVal: 2015, category: "ì¼ë³¸", actor: "ì¼ë³¸", content: "ì¼ë³¸ ì´ˆë“±í•™êµ êµê³¼ì„œì— 'í•œêµ­ì´ ë¶ˆë²• ì ê±°'ë¼ëŠ” ë‚´ìš© ê¸°ìˆ  í¬í•¨", source: "[26]" }
        ];

        // --- State Management ---
        const state = {
            searchQuery: '',
            selectedActor: null,
            selectedEra: 'all',
            filteredData: [...rawData]
        };

        // --- Colors ---
        const colors = {
            korea: '#3b82f6', // blue-500
            japan: '#ef4444', // red-500
            relation: '#8b5cf6', // violet-500
            international: '#10b981', // emerald-500
            nature: '#d97706', // amber-600
            bg: {
                korea: '#eff6ff', // blue-50
                japan: '#fef2f2', // red-50
                relation: '#f5f3ff', // violet-50
                international: '#ecfdf5', // emerald-50
                nature: '#fffbeb' // amber-50
            }
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeFilters();
            updateStatistics();
            renderChart();
            renderTimeline();
            setupEventListeners();
        });

        // --- Core Logic ---

        function getActorCategory(rawActor) {
            if (rawActor.includes('í•œêµ­') || rawActor.includes('ì¡°ì„ ') || rawActor.includes('ëŒ€í•œì œêµ­')) return 'korea';
            if (rawActor.includes('ì¼ë³¸')) return 'japan';
            if (rawActor.includes('ì„œì–‘') || rawActor.includes('ëŸ¬ì‹œì•„') || rawActor.includes('êµ­ì œ')) return 'international';
            if (rawActor.includes('í•œì¼')) return 'relation';
            return 'nature';
        }

        function getActorLabel(cat) {
            switch(cat) {
                case 'korea': return 'í•œêµ­ (Korea)';
                case 'japan': return 'ì¼ë³¸ (Japan)';
                case 'international': return 'êµ­ì œ/ì„œì–‘';
                case 'relation': return 'í•œì¼ ê´€ê³„';
                case 'nature': return 'ì§€ë¦¬/í˜•ì„±';
                default: return 'ê¸°íƒ€';
            }
        }

        function getColor(cat) {
            return colors[cat] || '#9ca3af';
        }
        
        function getBgColor(cat) {
            return colors.bg[cat] || '#f3f4f6';
        }

        function categorizeEras(data) {
            const eras = new Set();
            data.forEach(d => {
                if (d.yearVal < 1392) eras.add('ê³ ëŒ€/ì‚¼êµ­/ê³ ë ¤');
                else if (d.yearVal < 1910) eras.add('ì¡°ì„ /ëŒ€í•œì œêµ­');
                else if (d.yearVal < 1945) eras.add('ì¼ì œê°•ì ê¸°');
                else eras.add('í˜„ëŒ€ (ê´‘ë³µ ì´í›„)');
            });
            return Array.from(eras);
        }

        function getEraForYear(yearVal) {
            if (yearVal < 1392) return 'ê³ ëŒ€/ì‚¼êµ­/ê³ ë ¤';
            if (yearVal < 1910) return 'ì¡°ì„ /ëŒ€í•œì œêµ­';
            if (yearVal < 1945) return 'ì¼ì œê°•ì ê¸°';
            return 'í˜„ëŒ€ (ê´‘ë³µ ì´í›„)';
        }

        function initializeFilters() {
            // Actor Filters
            const actors = ['korea', 'japan', 'relation', 'international', 'nature'];
            const container = document.getElementById('actor-filters');
            
            actors.forEach(actor => {
                const btn = document.createElement('button');
                btn.className = `px-3 py-1.5 rounded-full text-xs font-medium border transition-all duration-200`;
                btn.style.borderColor = getColor(actor);
                btn.style.color = getColor(actor);
                btn.style.backgroundColor = 'white';
                btn.textContent = getActorLabel(actor);
                btn.dataset.actor = actor;
                
                btn.addEventListener('click', () => {
                    if (state.selectedActor === actor) {
                        state.selectedActor = null;
                        btn.style.backgroundColor = 'white';
                        btn.style.color = getColor(actor);
                    } else {
                        // Reset others
                        Array.from(container.children).forEach(c => {
                            c.style.backgroundColor = 'white';
                            c.style.color = getColor(c.dataset.actor);
                        });
                        state.selectedActor = actor;
                        btn.style.backgroundColor = getColor(actor);
                        btn.style.color = 'white';
                    }
                    applyFilters();
                });
                container.appendChild(btn);
            });

            // Era Filters
            const eraSelect = document.getElementById('era-select');
            const eras = categorizeEras(rawData);
            eras.forEach(era => {
                const opt = document.createElement('option');
                opt.value = era;
                opt.textContent = era;
                eraSelect.appendChild(opt);
            });
        }

        function updateStatistics() {
            document.getElementById('total-records').textContent = `ì´ ${rawData.length} ê±´ì˜ ê¸°ë¡`;
            document.getElementById('stat-start-year').textContent = '512ë…„'; // historical start
            document.getElementById('stat-count').textContent = rawData.length;
        }

        function setupEventListeners() {
            document.getElementById('search-input').addEventListener('input', (e) => {
                state.searchQuery = e.target.value.toLowerCase();
                applyFilters();
            });

            document.getElementById('era-select').addEventListener('change', (e) => {
                state.selectedEra = e.target.value;
                applyFilters();
            });

            document.getElementById('reset-btn').addEventListener('click', resetFilters);
        }

        function resetFilters() {
            state.searchQuery = '';
            state.selectedActor = null;
            state.selectedEra = 'all';
            
            document.getElementById('search-input').value = '';
            document.getElementById('era-select').value = 'all';
            
            const actorBtns = document.getElementById('actor-filters').children;
            Array.from(actorBtns).forEach(btn => {
                btn.style.backgroundColor = 'white';
                btn.style.color = getColor(btn.dataset.actor);
            });
            
            applyFilters();
        }

        function applyFilters() {
            state.filteredData = rawData.filter(item => {
                const actorKey = getActorCategory(item.actor);
                const eraKey = getEraForYear(item.yearVal);
                
                // Search Filter
                const searchMatch = item.content.toLowerCase().includes(state.searchQuery) || 
                                    item.year.toLowerCase().includes(state.searchQuery) ||
                                    item.actor.toLowerCase().includes(state.searchQuery);
                
                // Actor Filter
                const actorMatch = state.selectedActor ? actorKey === state.selectedActor : true;
                
                // Era Filter
                const eraMatch = state.selectedEra === 'all' ? true : eraKey === state.selectedEra;

                return searchMatch && actorMatch && eraMatch;
            });

            renderTimeline();
            updateChartHighlight();
            
            // Toggle Reset Button
            const isFiltered = state.searchQuery || state.selectedActor || state.selectedEra !== 'all';
            const resetBtn = document.getElementById('reset-btn');
            if (isFiltered) resetBtn.classList.remove('hidden');
            else resetBtn.classList.add('hidden');
        }

        // --- Rendering ---

        function renderTimeline() {
            const container = document.getElementById('timeline-feed');
            const noResults = document.getElementById('no-results');
            const countDisplay = document.getElementById('result-count');

            container.innerHTML = '';
            
            if (state.filteredData.length === 0) {
                noResults.classList.remove('hidden');
                countDisplay.textContent = '0 ê±´';
                return;
            } else {
                noResults.classList.add('hidden');
                countDisplay.textContent = `${state.filteredData.length} ê±´ í‘œì‹œì¤‘`;
            }

            let lastEra = '';

            state.filteredData.forEach((item, index) => {
                const actorKey = getActorCategory(item.actor);
                const itemColor = getColor(actorKey);
                const itemBg = getBgColor(actorKey);
                const currentEra = getEraForYear(item.yearVal);

                // Era Separator
                if (currentEra !== lastEra && state.selectedEra === 'all') {
                    const separator = document.createElement('div');
                    separator.className = 'sticky top-0 z-10 py-2 bg-[#fdfbf7]/90 backdrop-blur-sm mb-4 border-b border-gray-200';
                    separator.innerHTML = `<span class="font-bold text-gray-500 text-sm uppercase tracking-wide px-2">${currentEra}</span>`;
                    container.appendChild(separator);
                    lastEra = currentEra;
                }

                const card = document.createElement('div');
                card.className = `timeline-item relative pl-8 pb-8 group`;
                
                // Timeline Line & Dot
                card.innerHTML = `
                    <div class="timeline-line group-last:hidden"></div>
                    <div class="absolute left-[16px] top-2 w-4 h-4 rounded-full border-2 bg-white z-10 transform -translate-x-1/2" style="border-color: ${itemColor};"></div>
                    
                    <div class="card-hover bg-white rounded-lg border border-gray-100 p-5 shadow-sm hover:shadow-md relative overflow-hidden">
                        <!-- Color Tab -->
                        <div class="absolute left-0 top-0 bottom-0 w-1.5" style="background-color: ${itemColor};"></div>
                        
                        <div class="flex flex-col sm:flex-row sm:items-start justify-between mb-2">
                            <div>
                                <span class="inline-block px-2 py-0.5 rounded text-xs font-bold mb-1" style="background-color: ${itemBg}; color: ${itemColor};">
                                    ${item.year}
                                </span>
                                <h3 class="font-bold text-gray-800 text-lg">${item.category}</h3>
                            </div>
                            <span class="text-xs text-gray-400 mt-1 sm:mt-0 font-mono">Ref ${item.source}</span>
                        </div>
                        
                        <p class="text-gray-600 leading-relaxed text-sm md:text-base">
                            ${highlightText(item.content, state.searchQuery)}
                        </p>
                        
                        <div class="mt-3 flex items-center gap-2">
                            <span class="text-xs font-medium px-2 py-0.5 rounded bg-gray-100 text-gray-500 border border-gray-200">
                                ${item.actor}
                            </span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function highlightText(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="bg-yellow-200 text-gray-800 font-bold px-0.5 rounded">$1</span>');
        }

        // --- Chart.js Integration ---
        let historyChart = null;

        function renderChart() {
            const ctx = document.getElementById('historyChart').getContext('2d');
            
            // Aggregate Data
            const counts = {
                korea: 0,
                japan: 0,
                relation: 0,
                international: 0,
                nature: 0
            };

            rawData.forEach(item => {
                const key = getActorCategory(item.actor);
                counts[key]++;
            });

            const data = {
                labels: ['í•œêµ­ ê¸°ë¡', 'ì¼ë³¸ ê¸°ë¡', 'í•œì¼ ê´€ê³„', 'êµ­ì œ/ê¸°íƒ€'],
                datasets: [{
                    label: 'ê¸°ë¡ ìˆ˜',
                    data: [counts.korea, counts.japan, counts.relation, counts.international + counts.nature],
                    backgroundColor: [
                        colors.korea,
                        colors.japan,
                        colors.relation,
                        colors.international
                    ],
                    borderRadius: 6,
                    borderSkipped: false,
                    barThickness: 40
                }]
            };

            const config = {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            padding: 12,
                            titleFont: { family: 'Noto Sans KR', size: 13 },
                            bodyFont: { family: 'Noto Sans KR', size: 12 },
                            cornerRadius: 4,
                            displayColors: false,
                            callbacks: {
                                label: (ctx) => `${ctx.raw} ê±´ì˜ ì—­ì‚¬ì  ê¸°ë¡`
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#f3f4f6',
                                drawBorder: false
                            },
                            ticks: { font: { family: 'Noto Sans KR' } }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { font: { family: 'Noto Sans KR', size: 11 } }
                        }
                    },
                    onClick: (e, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const map = ['korea', 'japan', 'relation', 'international'];
                            const actor = map[index];
                            
                            // Trigger Filter
                            const btns = document.getElementById('actor-filters').children;
                            // Find button matching this actor
                            for (let btn of btns) {
                                if (btn.dataset.actor === actor || (actor === 'international' && btn.dataset.actor === 'nature')) {
                                    btn.click();
                                    break;
                                }
                            }
                        }
                    },
                    onHover: (event, chartElement) => {
                        event.native.target.style.cursor = chartElement[0] ? 'pointer' : 'default';
                    }
                }
            };

            historyChart = new Chart(ctx, config);
        }

        function updateChartHighlight() {
            if (!historyChart) return;
            
            const meta = historyChart.getDatasetMeta(0);
            const map = ['korea', 'japan', 'relation', 'international'];

            meta.data.forEach((bar, index) => {
                const actorKey = map[index];
                if (state.selectedActor) {
                    // Dim non-selected
                    const isSelected = actorKey === state.selectedActor || 
                                     (state.selectedActor === 'nature' && actorKey === 'international');
                    
                    bar.options.backgroundColor = isSelected ? colors[actorKey] : '#e5e7eb';
                } else {
                    // Reset
                    bar.options.backgroundColor = colors[actorKey];
                }
            });
            
            historyChart.update();
        }

    </script>
</body>
</html>
